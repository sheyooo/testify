<md-card-content class="p5">
    <div layout="column" layout-align="start top">
        <div layout="row" flex layout-fill class="">
            <div flex="10" flex-sm="15" class="img-circle square-img-container">
                <img class="img-circle" ng-src="{{post.user.avatar}}">
            </div>
            <div flex layout="column" class="ml15">
                <span class="md-body-1"><a href="">{{post.user.name}}</a></span>
                <span class="md-caption mb10"><time am-time-ago="post.time"></time> </span>
            </div>
            <div flex="10" layout="row" layout-align="end start">
                <md-menu md-position-mode="target-right target" class="no-p">
                    <md-button md-no-ink aria-label="Open Menu" class="md-icon-button" ng-click="openPostMenu($mdOpenMenu, $event)">
                        <my-icon md-menu-origin icon="chevron-down"></my-icon>
                    </md-button>
                    <md-menu-content width="2">
                        <md-menu-item>
                            <md-button md-no-ink ng-click="shareToFb()">
                                <my-icon icon="facebook" style="color: #4E69A2"></my-icon>
                                Share to Facebook
                            </md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <md-button md-no-ink ng-click="">
                                <my-icon icon="twitter" style="color: #55ACEE"></my-icon>
                                Share to Twitter
                            </md-button>
                        </md-menu-item>
                        <md-divider></md-divider>
                        <md-menu-item ng-show="(post.user.user_id == user.user_id)">
                            <md-button md-no-ink ng-click="">
                                <my-icon icon="pencil" class="text-muted"></my-icon>
                                Edit post
                            </md-button>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
            </div>
        </div>
        <div flex layout="column" layout-fill class="">
            <p ng-text-truncate="post.text" ng-tt-words-threshold="30" ng-tt-more-label="Show" ng-tt-less-label="Hide" class="md-body-1 md-accent pl5"></p>
            <md-divider></md-divider>
            <div layout="row">
                <p class="md-body-2 mb5 mt5 pr10 pl10">{{post.likes_count}} likes</p>
                <p class="md-body-2 mb5 mt5 pr10">{{post.comments_count}} comments</p>
                <p class="md-body-2 mb5 mt5 pr10">{{post.taps_count}} taps</p>
            </div>
            <md-divider></md-divider>
        </div>
        <div layout="row" class="pt10">
            <md-button class="no-m" layout="row" layout-align="start center" ng-click="toggleLike()" ng-class="{'md-accent md-hue-2' : !post.liked,'md-accent' : post.liked}">
                <my-icon icon="{{post.liked ? 'heart' : 'heart-outline' }} ">
                </my-icon>
                <span class="text-muted">like</span>
            </md-button>
            <md-button class="no-m md-accent md-hue-2 " ng-click="openCommentBox() ">
                <my-icon icon="comment-outline "></my-icon>
                <span class="text-muted">comment</span>
            </md-button>
            <md-button hide-sm class="no-m md-accent md-hue-2 " ng-click="shareToFb()">
                <my-icon icon="share"> </my-icon>
                share
            </md-button>
            <md-button class="no-m" ng-class="{'md-accent md-hue-2' : !post.taped,'md-accent' : post.taped}">
                <my-icon icon="unfold-less "> </my-icon>
                tap into
            </md-button>
        </div>
    </div>
</md-card-content>
<div ng-show="showCommentBox ">
    <md-divider></md-divider>
    <md-content layout="column" layout-padding>
        <div layout="row">
            <textarea rows="2" class="form-control pb5" placeholder="Say something..." style="resize: none; overflow: hidden"></textarea>
            <md-button class="md-icon-button md-primary md-hue-2" aria-label="Send comment" md-no-ink>
                <my-icon icon="send"></my-icon>
            </md-button>
        </div>
        <div class="pt10" ng-hide="post.comments.length" layout="row" layout-align="center center" style="height: 40px;">
            <md-progress-circular md-mode="indeterminate" md-diameter="30"></md-progress-circular>
        </div>
        <div class="mt20" ng-repeat="comment in post.comments">
            <div layout="row" flex layout-fill class="">
                <div flex="10" flex-sm="15" class="square-img-container">
                    <img class="square2 img-circle " ng-src="{{comment.user.avatar}}">
                </div>
                <div flex layout="column" class="ml15">
                    <div layout="row" style="display: inline">
                        <span class="md-body-1 mr5"><a href="">{{comment.user.name}}</a></span>
                        <p class="md-body-1" ng-text-truncate="comment.text" ng-tt-words-threshold="20" ng-tt-more-label="Show" ng-tt-less-label="Hide"></p>
                    </div>
                    <span class="md-body-1 pt5">
                    <time>{{ comment.time | amCalendar }}</time>
                    </span>
                </div>
            </div>
            <md-divider></md-divider>
        </div>
        <a href="" class="mt5 mb5">Show more comments</a>
    </md-content>
</div>
